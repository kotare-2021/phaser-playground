
<!doctype html>
<html lang="en">
<head>
   <meta charset="UTF-8" />
   <title>Making your first Phaser 3 Game - Part 1</title>
   <script src="//cdn.jsdelivr.net/npm/phaser@3.11.0/dist/phaser.js"></script>
   <style type="text/css">
       body {
           margin: 0;
       }
   </style>
</head>
<body>
 
 
<script type="text/javascript">
 
// up to cursor -> need to get characted moving but read instructions again.
//dunno where to put the key controls... added it in update function down below
 
   var config = {
       type: Phaser.AUTO,
       width: 800,
       height: 600,
       scene: {
 
           audio: {
               mute: false,
               volume: 1,
               rate: 1,
               detune: 0,
               seek: 0,
               loop: false,
               delay: 0,
               override: false
   },
           physics: {
           default: 'arcade',
           arcade: {
               gravity: { y: 300 },
               debug: false
           }
       },
           preload: preload,
           create: create,
           update: update
       }
   };
 
   var game = new Phaser.Game(config);
   var tilesprite;
   var cursors;
 
   function preload ()
   { //unzip music junk and add button sound effects all to workspace audio file. then play around with the sounds n stuff.
      
       this.load.image('starfield', 'assets/ymmijs/starsky.png');
       // this.load.image('sky', 'assets/ymmijs/back.png');
       this.load.image('ground', 'assets/ymmijs/clouds1.png');
       this.load.image('star', 'assets/ymmijs/star.png');
       this.load.image('bomb', 'assets/ymmijs/bomb.png');
       this.load.audio('mario', ['assets/ymmijs/audio/mario-1-up.mp3'])
       this.load.audio('themusic', ['assets/ymmijs/audio/hampyster.mp3'])
       this.load.spritesheet('dude', 'assets/ymmijs/doggy.png',{ frameWidth: 32, frameHeight: 32 });
       // this.load.spritesheet('dog1', '')
       // this.load.spritesheet('dog2', 'assets/ymmijs/dog-run', { frameWidth: 330, frameHeight: 66});
       this.load.audio('notif', ['assets/ymmijs/audio/notif.wav'])
       this.load.audio('drum1', ['assets/ymmijs/audio/drums/drum1.wav'])
       this.load.audio('bassdrum', ['assets/ymmijs/audio/drums/bassdrum.mp3'])
       this.load.audio('bonk', ['assets/ymmijs/audio/drums/bonk.wav'])
       this.load.audio('doubledrum', ['assets/ymmijs/audio/drums/doubledrum.wav'])
       this.load.audio('bark', ['assets/ymmijs/audio/dogbark.wav'])
       this.load.audio('kiss', ['assets/ymmijs/audio/kiss.wav'])
       this.load.audio('spunk', ['assets/ymmijs/audio/spunk.mp3'])
       this.load.image('home', 'assets/ymmijs/home.png')
 
      
 
 
//add some more random running dog sprites.
//when player crosses certain co-ordinates, it triggers dogs to fall from the sky into co-ordinates abvoe and below player.
 
     
     
 
     
   }
var floor;
   function create ()
 
 
   {
     
       //infinite scrolling background:
       tileSprite = this.add.tileSprite(0, 0, 800, 600, 'starfield');
       tileSprite.setOrigin(0,0);
       tileSprite.setScrollFactor(0);
    //backG music
       themusic = this.sound.add('themusic', {loop: true});
   //sounds here
   soundsArray = ['placeholderforzero',
       kiss = this.sound.add('kiss', { loop: false }),
       notif = this.sound.add('notif', {loop:false}),
       drum1 = this.sound.add('drum1', {loop:false}),
       kiss = this.sound.add('kiss', {loop:false}),
       spunk = this.sound.add('spunk', {loop:false}),
       bark = this.sound.add('bark', {loop:false}),
       bark = this.sound.add('bark', {loop:false}),
      
   ]
 
     
      
 
 
       // this.add.image(400, 300, 'sky');
 
 
       // tileSprite.fixedToCamera = true; //
 
 
       cursors = this.input.keyboard.createCursorKeys();
     
 
   //  sky= this.add.tileSprite(0, 0, 800, 600, 'sky')
   // .setOrigin(0)
   // .setScrollFactor(0,1);
      
   
       platforms = this.physics.add.staticGroup();
       doggihome = this.physics.add.staticGroup();
 
       doggihome.create(-300, 250, 'home').setScale(0.2)
 
       floor = platforms.create(0, 300, 'ground').refreshBody();
       const poo = floor.width - 100 //which is always 400.
       const wee = floor.x
       platforms.create(wee + poo , 300, 'ground')
       pp = platforms.create(wee + poo * 2, 300, 'ground')
       console.log(pp.x)
       console.log(poo)
 
       platforms.create(wee + poo  * 2,300, 'ground')
       platforms.create(wee + poo * 3, 300, 'ground')
       platforms.create(wee + poo * 4,300, 'ground')
 
   
      //stars.create(700, 10, 'star')
      //
 
 
 
       //ask facilitators if they know any cleaner ways to write it...
 
 
       // platforms.create(coords, 300, 'ground')
      
 
//we want to add 400 onto the last coordinate of the previous one and thats all.
 
 
 
 
       // platforms.create(600, 400, 'ground');
       // platforms.create(50, 250, 'ground');
       // platforms.create(750, 220, 'ground');
       player = this.physics.add.sprite(0, 0, 'dude');
       dog1 = this.physics.add.sprite('console log the co-ordinates')
       //need to figure out how to actually add the dog in. might only need 1 anim.create.
 
       // player.fixedToCamera = true;
       player.setBounce(0.2);
       // player.setCollideWorldBounds(true);
       player.body.setGravityY(300)
    
this.anims.create({
   key: 'starting',
   frames: this.anims.generateFrameNumbers('dude', { start: 29, end: 29 }),
   frameRate: 0,
   repeat: -1
});
       this.anims.create({
           key: 'left',
           frames: this.anims.generateFrameNumbers('dude', { start: 0, end: 3 }),
           frameRate: 10,
           repeat: -1
       });
 
       this.anims.create({
           key: 'turn',
           frames: [ { key: 'dude', frame: 29 } ],
           frameRate: 20
       });
 
       this.anims.create({
           key: 'right',
           frames: this.anims.generateFrameNumbers('dude', { start: 32, end: 34}),
           frameRate: 10,
           repeat: -1
       });
 
       this.physics.add.collider(player, platforms);
      
    //when player touches them they disappear.
    // they each make their own individual noise
    //they each have their own co-ordinates.  
 
       stars = this.physics.add.group()
       starsArray = [
           stars.create(400, 10, 'star'),
           stars.create(900, 10, 'star'),
           stars.create(1234, 10, 'star'),
           stars.create(100, 10, 'star'),
           stars.create(600, 10, 'star'),
           stars.create(700, 10, 'star'),
       ]
 
   //for each star in the array try to match the sound with the sound in the sound array.
 
 
 
   // stars.children.iterate(function (child) {
 
 
   //     child.setBounceY(Phaser.Math.FloatBetween(0.4, 0.8));
 
   // });
 
   this.physics.add.collider(stars, platforms);
 
this.physics.add.overlap(player, stars, collectStar, null, this);
 
 
var score = 0;
var scoreText;
 
scoreText = this.add.text(16, 16, 'score: 0', { fontSize: '32px', fill: '#000' });
 
///
 
 
// if the star
 
function collectStar (player, star)
{
 
   star.disableBody(true, true);
   score += 1;
   scoreText.setText('Score: ' + score);
   //score is a number.
   whichSong = soundsArray[score]
   whichSong.play();
   // whichSong.play()
  
 
 
//
 
 
 
   // if (stars.countActive(true) === 0)
   // {
   //     // stars.children.iterate(function (child) {
 
   //     //     child.enableBody(true, child.x, 0, true, true);
 
   //     // });
 
   //     var x = (player.x < 400) ? Phaser.Math.Between(400, 800) : Phaser.Math.Between(0, 400);
 
   //     var bomb = bombs.create(x, 16, 'bomb');
   //     bomb.setBounce(1);
   //     bomb.setCollideWorldBounds(true);
   //     bomb.setVelocity(Phaser.Math.Between(-200, 200), 20); }
}
 
 
bombs = this.physics.add.group();
 
this.physics.add.collider(bombs, platforms);
 
this.physics.add.collider(player, bombs);
 
 
 
function hitBomb (player, bomb)
{
   // this.physics.pause();
   this.physics.play();
 
   // player.setTint(0xff0000);
 
   player.anims.play('turn');
 
   // gameOver = true;
}
 
spacebar = this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.SPACE);
rightStart = this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.RIGHT);
stopEscKey = this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.ESC);
cursors = this.input.keyboard.createCursorKeys();
 
 
this.cameras.main.startFollow(player);
 
}
 
//end of create function
 
var flipflop;
   function update() {
 
       //finds players co-ordiantes on screen:
// console.log(player.x)
  
  
 
if (flipflop === true) {
   tileSprite.tilePositionX += 6;
   player.anims.play('right', true);
   player.setVelocityX(160)
 
 
} else {
   player.anims.play('starting', true);
  
 
}
 
 
 
 
//background sound is done.
   if (cursors.space.isDown) {
       player.setVelocityY(-300);
 
   }      
 
   else if (cursors.left.isDown){
 
   player.setVelocityX(-160);
 
   player.anims.play('left', true);
} else if (cursors.up.isDown)
{
   player.setVelocityY(-300);
}
// else if (cursors.right.isDown)
// {
//     player.setVelocityX(160);
//     player.anims.play('right', true);
// // }
// else
// {
//     player.setVelocityX(0);
 
//     player.anims.play('turn');       // turn = default position
// }
 
 
 
//
 
//
if (Phaser.Input.Keyboard.JustDown(rightStart) &&  !themusic.isPlaying || Phaser.Input.Keyboard.JustDown(spacebar) && !themusic.isPlaying ){
 
  
if(themusic.isPaused === true) {
   flipflop = true;
   themusic.resume();
 
   
  
} else {
   themusic.play();
   flipflop = true;
  
 
}
 
}
 
if (Phaser.Input.Keyboard.JustDown(stopEscKey)) {
themusic.pause();
player.setVelocityX(0);
flipflop = false;
 
 
}
 
 
 
   }
 
 
 
  
 
 
 
</script>
 
</body>
</html>
 
 
